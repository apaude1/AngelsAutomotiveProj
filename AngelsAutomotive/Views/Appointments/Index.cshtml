@model IEnumerable<AngelsAutomotive.Data.Entities.Appointment>

@{ ViewData["Title"] = "Index"; }

<h2>Appointments</h2>

<p>
    <a asp-action="Create" class="btn btn-primary">Create New</a>
</p>
<p>@ViewBag.result</p>
<table class="table">
    <thead>
        <tr>
            @if (this.User.IsInRole("Admin"))
            {
        <th>
            @Html.DisplayNameFor(model => model.User.FullName)
        </th>}
            <th>
                @Html.DisplayNameFor(model => model.AppointmentDateLocal)
            </th>
            @*<th>
                @Html.DisplayNameFor(model => model.vehicle.VinNummber)
            </th>*@
            @*<th>
                @Html.DisplayNameFor(model => model.DeliveryDate)
            </th>*@
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
        <tr>
            @if (this.User.IsInRole("Admin"))
            {
        <th>
            @Html.DisplayFor(modelItem => item.User.FullName)
        </th>
}
            <td>
                @Html.DisplayFor(modelItem => item.AppointmentDateLocal)
            </td>
            @*<td>
                @Html.DisplayFor(modelItem => item.vehicle.VinNummber)
            </td>*@
            @*<td>
                @Html.DisplayFor(modelItem => item.appointmentdetail.LicencePlate)
            </td>*@
            @*<td>
                @Html.DisplayFor(modelItem => item.DeliveryDate)
            </td>*@
            <td>
                @*<a asp-action="Deliver" asp-route-id="@item.Id" class="btn btn-info" id="btnDeliver">Details</a>*@
                @if (this.User.Identity.IsAuthenticated && this.User.IsInRole("Admin"))
                {@*<a asp-action="Index" asp-route-id="@item.Id" class="btn btn-info" id="btnCreateServiceOrder"  onclick='window.location = "@Url.Action("Index", "ServiceOrder")";'>CreateServiceOrder</a>*@
                                    <a href='@Url.Action("Create", "ServiceOrder")'>
                                        <input type='button' class="btn btn-info" value='CreateServiceOrder' />
                                    </a>
                                                       <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-danger" id="btnDelete">Delete</a>}
            </td>
        </tr>}
    </tbody>
</table>

